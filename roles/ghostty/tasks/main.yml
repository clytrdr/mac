- name: Install and configure Ghostty terminal emulator
  tags:
    - ghostty
  block:
    - name: Install Ghostty via Homebrew Cask
      community.general.homebrew_cask:
        name: ghostty
        state: latest

    - name: Ensure Ghostty config directory exists
      ansible.builtin.file:
        path: "{{ ansible_facts.env.HOME }}/.config/ghostty"
        state: directory
        mode: '0755'

    - name: Deploy Ghostty config
      ansible.builtin.template:
        src: templates/config.j2
        dest: "{{ ansible_facts.env.HOME }}/.config/ghostty/config"
        mode: '0644'
